/**********************************************************************************************
 * This class was automatically generated by Adichatz tools on Tue Jul 07 12:30:03 CEST 2020
 *
 * 				+----------------------------------------+
 * 				| BE CAREFUL BEFORE UPDATING THIS CLASS! |
 * 				+----------------------------------------+
 *
 * Changes will be transient up to next generation process.
 * **********************************************************************************************/
package org.adichatz.jpa.gencode.common.toolBar;

import javax.inject.Inject;
import org.adichatz.engine.action.AAction;
import org.adichatz.engine.common.AdichatzApplication;
import org.adichatz.engine.controller.IContainerController;
import org.adichatz.engine.controller.action.ActionController;
import org.adichatz.engine.extra.AdiResourceURI;
import org.adichatz.engine.plugin.AdiContext;
import org.adichatz.engine.plugin.ParamMap;
import org.adichatz.engine.renderer.AdiFormToolkit;
import org.adichatz.jpa.gencode.common.toolBar.MasterDetailStubTBM;
import org.eclipse.swt.SWT;
import org.eclipse.swt.custom.SashForm;
import org.eclipse.swt.widgets.Control;

@AdiResourceURI(URI="adi://org.adichatz.jpa/common.toolBar/OnePageMasterDetailTBM")
public class OnePageMasterDetailTBM extends MasterDetailStubTBM {
	// the ActionController expandDetailActionACT.
	private ActionController expandDetailActionACT;
	@Inject
	protected AdiFormToolkit toolkit;
	/**
	 * Instantiates a new OnePageMasterDetailTBM.
	 * 
	 * This constructor could be used by Column parameter. (see org.adichatz.jpa)
	 * 
	 * @param parentContext
	 *            the parent context
	 * @param parentController
	 *            the parent controller
	 */
	public OnePageMasterDetailTBM(AdiContext parentContext, IContainerController parentController) {
		super(parentContext,parentController);
	}

	/**
	 * Creates class OnePageMasterDetailTBM extension of org.adichatz.jpa.gencode.common.toolBar.MasterDetailStubTBM.
	 *
	 * @param context
	 *            The context of the root controller
	 * @param parent controller
	 *            The collection parentController
	 * @param id
	 *            The part id
	 * @param parentContext
	 *            The parent context
	 */
	public OnePageMasterDetailTBM(ParamMap paramMap, IContainerController parentController, String id, AdiContext parentContext) {
		super(paramMap, parentController, id, parentContext);
		coreController = parentController;
	}

	/**
	 * creates contents
	 */
	public void createContents(){
		super.createContents();
		// Creates control for ActionController expandDetailActionACT
		expandDetailActionACT = new ActionController("expandDetailAction", managedToolBarTB, this) {
			@Override
			public void createControl() {
				if (isValid()) {
					action =  new AAction() {
						@Override
						public void runAction() {
							expand(getControl(), getDetailControl());
						}
						@Override
						public void init() {
							super.init();
							setImageDescriptor(toolkit.getRegisteredImageDescriptor("IMG_VERTICAL_EXPAND_DETAIL"));
							setToolTipText(AdichatzApplication.getInstance().getMessage("org.adichatz.engine", "adichatzEngine", "expandHeader"));
						}
					};
					action.setActionController(this);
				}
				super.createControl();
				if (isValid()) {
					getControl().setImageDescriptor(toolkit.getRegisteredImageDescriptor("IMG_VERTICAL_EXPAND_DETAIL"));
					getControl().setToolTipText(AdichatzApplication.getInstance().getMessage("org.adichatz.engine", "adichatzEngine", "expandHeader"));
				}
			}
		};
	}
	
	//* *****************
	//* Additional code *
	//*******************
	protected void expand(AAction action, Control control) {
	    SashForm sashForm = getSashForm();
	    if (!control.equals(sashForm.getMaximizedControl())) {
	        sashForm.setMaximizedControl(control);
	        setImages(sashForm);
	        action.setImageDescriptor(toolkit.getRegisteredImageDescriptor("IMG_VERTICAL"));     			
	    } else {
	        sashForm.setMaximizedControl(null);
	        setImages(sashForm);
	    }
	}
	protected void setImages(SashForm sashForm) {
		((ActionController) getFromRegister("expandDetailAction")).getControl().setImageDescriptor(toolkit.getRegisteredImageDescriptor("IMG_VERTICAL_EXPAND_DETAIL"));
	}
}