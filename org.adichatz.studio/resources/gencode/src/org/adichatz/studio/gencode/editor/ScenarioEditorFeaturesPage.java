/**********************************************************************************************
 * This class was automatically generated by Adichatz tools on Tue May 12 15:04:27 CEST 2020
 *
 * 				+----------------------------------------+
 * 				| BE CAREFUL BEFORE UPDATING THIS CLASS! |
 * 				+----------------------------------------+
 *
 * Changes will be transient up to next generation process.
 * **********************************************************************************************/
package org.adichatz.studio.gencode.editor;

import net.miginfocom.swt.MigLayout;
import org.adichatz.engine.common.AdichatzApplication;
import org.adichatz.engine.common.EngineConstants;
import org.adichatz.engine.common.EngineTools;
import org.adichatz.engine.controller.IContainerController;
import org.adichatz.engine.controller.collection.CTabFolderController;
import org.adichatz.engine.controller.collection.IncludeController;
import org.adichatz.engine.core.AFormPageCore;
import org.adichatz.engine.core.ControllerCore;
import org.adichatz.engine.core.EntityManagerCore;
import org.adichatz.engine.extra.AdiResourceURI;
import org.adichatz.engine.indigo.controller.LegacyFormPageController;
import org.adichatz.engine.plugin.AdiContext;
import org.adichatz.engine.plugin.ParamMap;
import org.adichatz.studio.xjc.controller.FeaturesTableController;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;

@AdiResourceURI(URI="adi://org.adichatz.studio/editor/ScenarioEditor")
public class ScenarioEditorFeaturesPage extends AFormPageCore {
	// the LegacyFormPageController featuresPageFP.
	protected LegacyFormPageController featuresPageFP;
	// the IncludeController featuresTBMINCL.
	private IncludeController featuresTBMINCL;
	// the CTabFolderController featuresTabFolderCTBF.
	protected CTabFolderController featuresTabFolderCTBF;
	protected ControllerCore scenarioEditorGeneratorsItem;
	protected ControllerCore scenarioEditorScenariosItem;
	protected ControllerCore scenarioEditorControllersItem;
	protected ControllerCore scenarioEditorPathsItem;
	protected ControllerCore scenarioEditorParametersItem;
	protected ControllerCore scenarioEditorActionResourcesItem;
	/**
	 * Creates the formPage ScenarioEditorFeaturesPage.
	 *
	 * @param context
	 *            The context of the root controller
	 * @param parentController
	 *            The parent controller
	 * @param managedForm
	 *            The managed form
	 */
	public ScenarioEditorFeaturesPage(final AdiContext context, IContainerController parentController) {
		super(context);
		this.parentController = parentController;
		createContents();
	}

	/**
	 * Create contents for FormPage
	 */
	public void createContents(){
		// Creates control for LegacyFormPageController featuresPageFP
		featuresPageFP = new LegacyFormPageController("featuresPage", parentController, this) {
			@Override
			public void createControl() {
				super.createControl();
				if (isValid()) {
					getControl().getForm().setText(AdichatzApplication.getInstance().getMessage("org.adichatz.studio", "adichatzStudio", "scenario.features.formText", ((String) context.getParam("pluginName"))));
					getComposite().setLayout(new MigLayout("wrap 1","[grow,fill]","[grow,fill]"));
				}
			}
		};
		coreController = featuresPageFP;
		// Creates control for IncludeController featuresTBMINCL
		String featuresTBMIK = "adi://editor/ScenarioTBM";
		if (!EngineTools.isEmpty(featuresTBMIK)) {
			final String[] featuresTBMKeys = EngineTools.getInstanceKeys(featuresTBMIK);
			featuresTBMINCL = new IncludeController("featuresTBM", featuresPageFP, new EntityManagerCore(getContext())) {
				@Override
				public void createContents() {
					// loads and instantiates the class featuresTBMINCL.
					if (null != EngineConstants.GENERATOR) {
						pluginResources = null == featuresTBMKeys[0] ? getPluginResources() : AdichatzApplication.getPluginResources(featuresTBMKeys[0]);
						instantiateIncludeClass(pluginResources, featuresTBMKeys[2], featuresTBMKeys[1], new Class[] {ParamMap.class, IContainerController.class, String.class, AdiContext.class}, new Object[] {getParamMap(), this, "featuresTBM", context});
					} else
						new ScenarioTBM(getParamMap(), this, "featuresTBM", context).createContents();
				}
			};
		}
		// Creates control for CTabFolderController featuresTabFolderCTBF
		featuresTabFolderCTBF = new CTabFolderController("featuresTabFolder", featuresPageFP, this) {
			@Override
			public void createControl() {
				super.createControl();
				if (isValid()) {
					getControl().setLayoutData("span 2");
				}
			}
			@Override
			public void synchronize() {
				super.synchronize();
				if (isValid()) {
					SelectionAdapter featuresTabFolderLSTN$0 = new SelectionAdapter() {
						@Override
						public void widgetSelected(SelectionEvent event) {
							((FeaturesTableController) getSelectedController().getChildControllers().get(0)).selectOutlinePage();
						}
					};
					getControl().addSelectionListener(featuresTabFolderLSTN$0);
					setSelection(0);
				}
			}
		};
		
		// loads and instantiates the class ScenarioEditorGeneratorsItem.
		scenarioEditorGeneratorsItem  = new ScenarioEditorGeneratorsItem(context, featuresTabFolderCTBF);
		
		// loads and instantiates the class ScenarioEditorScenariosItem.
		scenarioEditorScenariosItem  = new ScenarioEditorScenariosItem(context, featuresTabFolderCTBF);
		
		// loads and instantiates the class ScenarioEditorControllersItem.
		scenarioEditorControllersItem  = new ScenarioEditorControllersItem(context, featuresTabFolderCTBF);
		
		// loads and instantiates the class ScenarioEditorPathsItem.
		scenarioEditorPathsItem  = new ScenarioEditorPathsItem(context, featuresTabFolderCTBF);
		
		// loads and instantiates the class ScenarioEditorParametersItem.
		scenarioEditorParametersItem  = new ScenarioEditorParametersItem(context, featuresTabFolderCTBF);
		
		// loads and instantiates the class ScenarioEditorActionResourcesItem.
		scenarioEditorActionResourcesItem  = new ScenarioEditorActionResourcesItem(context, featuresTabFolderCTBF);
	}

}